#LyX 1.3 created this file. For more info see http://www.lyx.org/
\lyxformat 221
\textclass book
\language french
\inputencoding auto
\fontscheme bookman
\graphics default
\paperfontsize 11
\spacing single 
\papersize letterpaper
\paperpackage a4
\use_geometry 0
\use_amsmath 0
\use_natbib 0
\use_numerical_citations 0
\paperorientation portrait
\secnumdepth 5
\tocdepth 3
\paragraph_separation skip
\defskip smallskip
\quotes_language french
\quotes_times 2
\papercolumns 1
\papersides 1
\paperpagestyle headings

\layout Chapter

Exemples avec Halui
\layout Standard

Pour que ces exemples fonctionnent, vous devez ajouter la ligne suivante
 dans la section [HAL] du fichier ini.
\layout Quote

HALUI = halui
\layout Section

Pause et Reprise
\layout Standard

Cet exemple a été developpé pour permettre à EMC2 de déplacer un axe rotatif
 selon un signal provenant d'une machine extérieure.
 La coordination entre les deux systèmes sera assurée par deux composants
 de Halui.
\layout Itemize

halui.program.is-paused
\layout Itemize

halui.program.resume
\layout Standard

Dans votre fichier custom.hal, ajoutez les deux lignes suivantes qui seront
 connectées à vos entrées/sorties pour mettre le programme en pause ou pour
 le reprendre quand l'autre système veut qu'EMC2 soit relancé.
\layout Quote

net ispaused halui.program.is-paused => "votre broche en sortie"
\layout Quote

net resume halui.program.resume <= "votre broche en entrée"
\layout Standard

Vos broches "entrée" et "sortie" correspondent à celles qui sont câblées
 vers l'autre contrôleur.
 Elles peuvent être des broches du port parallèle ou toutes autres broches
 auquelles vous avez accès.
 
\layout Standard

Le fonctionnement est le suivant, quand un M0 est rencontré dans le programme
 g-code, halui.program.is-paused devient 
\begin_inset Quotes fld
\end_inset 

vrai
\begin_inset Quotes frd
\end_inset 

.
 Ce qui rend votre broche "sortie" également 
\begin_inset Quotes fld
\end_inset 

vraie
\begin_inset Quotes frd
\end_inset 

 de sorte que l'autre contrôleur sait qu'EMC2 est arrêté.
 
\layout Standard

Pour reprendre le cours du g-code l'autre contrôleur devra rendre votre
 "entrée" 
\begin_inset Quotes fld
\end_inset 

vraie
\begin_inset Quotes frd
\end_inset 

.
 Ce qui relancera EMC2 jusqu'au prochain M0.
\layout Standard

Difficultés de timing
\layout Itemize

Le signal de reprise ne doit pas être plus long que le temps nécessaire
 pour exécuter le g-code
\layout Itemize

Le signal 
\begin_inset Quotes fld
\end_inset 

Is Paused
\begin_inset Quotes frd
\end_inset 

 ne doit plus être actif quand le signal suivant de reprise arrive
\layout Standard

Ces problèmes de timming pourraient être évités en utilisant ClassicLadder
 pour activer le signal 
\begin_inset Quotes fld
\end_inset 

is paused
\begin_inset Quotes frd
\end_inset 

 avec une tempo et le désactiver en fin de tempo.
 La reprise pourrait également être fournie par un signal monostable très
 court.
\layout Standard


\begin_inset Note
collapsed true

\layout Standard

add ClassicLadder example
\end_inset 


\the_end
